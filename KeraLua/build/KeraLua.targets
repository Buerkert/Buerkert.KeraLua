<?xml version="1.0" encoding="utf-8"?> 
<Project>
    <PropertyGroup>
        <WindowsNativeX86LuaPath>$(MSBuildThisFileDirectory)..\runtimes\win-x86\native\lua52.dll</WindowsNativeX86LuaPath>
        <LinuxNativeX86LuaPath>$(MSBuildThisFileDirectory)..\runtimes\linux-x86\native\lua52.so</LinuxNativeX86LuaPath>
        <WindowsNativeX64LuaPath>$(MSBuildThisFileDirectory)..\runtimes\win-x64\native\lua52.dll</WindowsNativeX64LuaPath>
        <LinuxNativeX64LuaPath>$(MSBuildThisFileDirectory)..\runtimes\linux-x64\native\lua52.so</LinuxNativeX64LuaPath>
    </PropertyGroup>

    <ItemGroup Condition=" '$(PlatformTarget)' == 'x64' ">
        <Content Include="$(WindowsNativeX64LuaPath)" Condition="Exists($(WindowsNativeX64LuaPath))">
            <Link>$([System.IO.Path]::GetFilename('$(WindowsNativeX64LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(LinuxNativeX64LuaPath)">
            <Link>$([System.IO.Path]::GetFilename('$(LinuxNativeX64LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
    </ItemGroup>
    <ItemGroup Condition=" '$(PlatformTarget)' == 'x86'  ">
        <Content Include="$(WindowsNativeX86LuaPath)">
            <Link>$([System.IO.Path]::GetFilename('$(WindowsNativeX86LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(LinuxNativeX86LuaPath)">
            <Link>$([System.IO.Path]::GetFilename('$(LinuxNativeX86LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
    </ItemGroup>
    <!-- a special case for Any CPU -->
    <ItemGroup Condition=" '$(PlatformTarget)' != 'x64' and '$(PlatformTarget)' != 'x86' ">
        <!-- Windows -->
        <Content Include="$(WindowsNativeX86LuaPath)">
            <Link>x86\$([System.IO.Path]::GetFilename('$(WindowsNativeX86LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(LinuxNativeX86LuaPath)" Condition="Exists('$(LinuxNativeX86LuaPath)')">
            <Link>x86\$([System.IO.Path]::GetFilename('$(LinuxNativeX86LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(WindowsNativeX64LuaPath)">
            <Link>x64\$([System.IO.Path]::GetFilename('$(WindowsNativeX64LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="$(LinuxNativeX64LuaPath)" Condition="Exists('$(LinuxNativeX64LuaPath)')">
            <Link>x64\$([System.IO.Path]::GetFilename('$(LinuxNativeX64LuaPath)'))</Link>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
    </ItemGroup>

</Project>